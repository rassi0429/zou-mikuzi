import OpenAI from 'openai';

const omikujiResults = [
    "大吉", "中吉", "小吉", "吉", "末吉", "半吉", "凶", "大凶", "微吉", "仏吉",
    "驚吉", "雪吉", "雨吉", "風吉", "迷吉", "星吉", "鬼吉", "華吉", "月吉", "空吉",
    "光吉", "混吉", "音吉", "影吉", "謎吉", "霧吉", "鏡吉", "炎吉", "波吉", "舞吉",
    "雷吉", "輪吉", "跳吉", "曇吉", "福吉", "福凶", "歌吉", "笑吉", "泣吉", "怒吉",
    "恋吉", "旅吉", "釣吉", "飛吉", "滑吉", "怪吉", "青吉", "紅吉", "虹吉", "白吉",
    "銀吉", "金吉", "黒吉", "時吉", "線吉", "箱吉", "閉吉", "開吉", "扉吉", "無吉",
    "有吉", "路吉", "夢吉", "踊吉", "鳴吉", "鶴吉", "亀吉", "猫吉", "犬吉", "魚吉",
    "山吉", "海吉", "川吉", "湖吉", "森吉", "花凶", "迷凶", "無凶", "騒凶", "忘凶",
    "凍凶", "音凶", "遠凶", "狭凶", "冷凶", "暖凶", "速凶", "遅凶", "高凶", "低凶",
    "曲凶", "果凶", "水凶", "火凶", "土凶", "天凶", "地凶", "宇凶", "宙凶", "無限吉",
    "銀河吉", "スペースキー吉", "バグ吉", "メタ吉", "エラー吉", "超新星吉", "AI吉",
    "ピクセル吉", "サイバー吉", "謎肉吉", "うどん吉", "ポテト吉", "スイーツ吉", "炭酸吉", "温泉吉", "風呂吉", "シャワー吉",
    "無重力吉", "ブラックホール吉", "ワームホール吉", "おにぎり吉", "寿司吉", "焼きそば吉", "カレー吉", "ラーメン吉", "たこ焼き吉", "ピザ吉",
    "アニメ吉", "マンガ吉", "VTuber吉", "配信吉", "ゲーム吉", "課金吉", "ガチャ吉", "大爆死吉", "ドロップ吉", "装備吉",
    "迷子吉", "方向音痴吉", "マヨネーズ吉", "ケチャップ吉", "ソース吉", "ミルクティー吉", "紅茶吉", "コーヒー吉", "カフェオレ吉", "ほうじ茶吉",
    "くじら吉", "イルカ吉", "宇宙猫吉", "ねこね吉", "わんこ吉", "ぱんだ吉", "カピバラ吉", "ハムスター吉", "カブトムシ吉", "バッタ吉",
    "豆腐吉", "納豆吉", "味噌吉", "醤油吉", "炭吉", "ファイヤー吉", "バーベキュー吉", "宇宙船吉", "ロボット吉", "ドローン吉",
    "音速吉", "亀速吉", "スーパー吉", "スーパーノヴァ吉", "量子吉", "遅延吉", "処理落ち吉", "リロード吉", "キャンプ吉", "アウトドア吉",
    "無謀吉", "ギリギリ吉", "余裕吉", "スマホ吉", "充電切れ吉", "Wi-Fi吉", "電波吉", "通信障害吉", "合体吉", "分裂吉",
    "パン吉", "トースト吉", "ジャム吉", "バター吉", "ハチミツ吉", "ラジオ吉", "テレビ吉", "リモコン吉", "冷蔵庫吉", "洗濯機吉",
    "銀河凶", "スペースキー凶", "バグ凶", "エラー凶", "ブラックホール凶", "迷子凶", "方向音痴凶",
    "おにぎり凶", "寿司凶", "たこ焼き凶", "ラーメン凶", "カレー凶", "ポテト凶", "炭酸凶", "温泉凶", "風呂凶", "シャワー凶",
    "ピクセル凶", "サイバー凶", "超新星凶", "謎肉凶", "うどん凶", "ソース凶", "マヨネーズ凶", "ケチャップ凶", "納豆凶", "豆腐凶",
    "焼きそば凶", "ファイヤー凶", "スイーツ凶", "ミルクティー凶", "コーヒー凶", "紅茶凶", "カフェオレ凶", "ほうじ茶凶", "炭凶", "氷凶",
    "宇宙猫凶", "ねこね凶", "わんこ凶", "カピバラ凶", "ぱんだ凶", "ハムスター凶", "カブトムシ凶", "バッタ凶", "イルカ凶", "くじら凶",
    "Wi-Fi凶", "電波凶", "通信障害凶", "充電切れ凶", "スマホ凶", "遅延凶", "処理落ち凶", "リロード凶", "ガチャ爆死凶", "課金凶",
    "アニメ凶", "マンガ凶", "VTuber凶", "配信凶", "ゲームオーバー凶", "方向音痴凶", "迷宮凶", "謎凶", "暗闇凶", "霧凶",
    "音速凶", "亀速凶", "合体失敗凶", "分裂凶", "パン凶", "ジャム凶", "バター凶", "ハチミツ凶", "冷蔵庫凶", "洗濯機凶",
    "アウトドア凶", "キャンプ凶", "火起こし失敗凶", "滑落凶", "遭難凶", "ブラックアウト凶", "雨天中止凶", "台風凶", "竜巻凶", "地震凶",
    "波凶", "深海凶", "大破凶", "沈没凶", "ロボット暴走凶", "ドローン墜落凶", "宇宙船爆発凶", "量子凶", "スーパー凶", "無限凶",
    "星凶", "月凶", "太陽凶", "地球凶", "火星凶", "金星凶", "木星凶", "土星凶", "天王星凶", "海王星凶",
    "リズム吉", "ポエム吉", "花火吉", "流星吉", "風鈴吉", "星座吉",
    "タイムトラベル吉", "過去吉", "未来吉", "現在吉", "冒険吉", "探検吉", "宝探し吉", "発見吉", "ラッキー吉", "フォーチュン吉",
    "キング吉", "クイーン吉", "ジャック吉", "プリンス吉", "プリンセス吉", "ナイト吉", "ロード吉", "マスター吉", "弟子吉", "勇者吉",
    "魔王吉", "天使吉", "悪魔吉", "妖精吉", "竜吉", "フェニックス吉", "ユニコーン吉", "ゴブリン吉", "オーク吉", "賢者吉",
    "占い師吉", "錬金術師吉", "ハッカー吉", "プログラマー吉", "デザイナー吉", "クリエイター吉", "カメラマン吉", "シェフ吉", "職人吉", "匠吉",
    "忍者吉", "侍吉", "剣士吉", "弓使い吉", "魔法使い吉", "僧侶吉", "踊り子吉", "吟遊詩人吉", "錬金吉", "契約吉",
    "招き猫吉", "福袋吉", "幸運吉", "金運吉", "健康吉", "家庭円満吉", "学問吉", "芸術吉", "冒険者吉", "ギルド吉",
    "崖っぷち凶", "スリップ凶", "坂道転倒凶", "忘れ物凶", "通信エラー凶", "圏外凶", "電池切れ凶", "データ消失凶", "パスワード忘却凶", "アカウント凍結凶",
    "Wi-Fi切断凶", "ガチャ爆死凶", "課金地獄凶", "サーバー落ち凶", "チート失敗凶", "ゲームオーバー凶", "バグ凶", "メモリ不足凶", "ブルースクリーン凶", "クラッシュ凶",
    "迷子凶", "方向音痴凶", "滑落凶", "遭難凶", "渋滞凶", "遅刻凶", "忘却凶", "破損凶", "紛失凶", "盗難凶",
    "雨天凶", "嵐凶", "落雷凶", "台風凶", "津波凶", "洪水凶", "竜巻凶", "地震凶", "噴火凶", "雪崩凶",
    "凍結凶", "寒波凶", "熱波凶", "乾燥凶", "湿気凶", "異常気象凶", "疫病凶", "食中毒凶", "虫刺され凶", "迷惑電話凶",
    "渦巻凶", "騒音凶", "大破凶", "沈没凶", "宇宙船爆発凶", "ロボット暴走凶", "ドローン墜落凶", "爆弾解除失敗凶", "火事凶", "煙凶",
    "暗闇凶", "迷信凶", "呪い凶", "悪霊凶", "封印解除凶", "毒凶", "幻覚凶", "洗脳凶", "催眠凶", "暴走凶",
    "食べ過ぎ凶", "飲み過ぎ凶", "疲労凶", "睡眠不足凶", "運動不足凶", "ダイエット失敗凶", "金欠凶", "家計破綻凶", "友情破壊凶", "愛情不足凶"
];

const prompt =
    `あなたは今日の運勢を占うおみくじを生成するAIです。 おみくじの結果をJSON形式で出力してください。
形式は
{"result": "", "message": "", "ganbo": "", "renai": "", "gakumon": "", "shobai":"", "byouki":""}
の形式で出力してください。コメントブロックや、余計な文字列は出力しないでください。
今回のresultは__REPLACE__です。resultを参考に、messageやganbo、renai、gakumon、shobai、byoukiを生成してください。
面白い結果が出るように設定してください。
messageは、おみくじの結果についてのメッセージを200文字以上で自由に設定してください。
ラッキーカラーや、今日の運命の人、ラッキーアイテム、ラッキー文字、ラッキー絵文字、ラッキー惑星など、２つ以上の要素を含めてください。
おみくじの結果についての詳細な情報を出力してください。
ganboは、"焦ることなかれ、期は来る"など、resultを参考に、短めのおみくじに書いてありそうなメッセージを生成してください。
renaiは、resultを参考に、短めのおみくじに書いてありそうなメッセージを生成してください。
gakumonは、resultを参考に、短めのおみくじに書いてありそうなメッセージを生成してください。
shobaiは、resultを参考に、短めのおみくじに書いてありそうなメッセージを生成してください。
byoukiは、resultを参考に、短めのおみくじに書いてありそうなメッセージを生成してください。
`


const client = new OpenAI({
    apiKey: process.env.OPENAI_API_KEY
});

const generateMikuzi = async () => {
    const completion = await client.chat.completions.create({
        model: "gpt-3.5-turbo",
        messages: [
            {"role": "system", "content": prompt.replace("__REPLACE__", omikujiResults[Math.floor(Math.random() * omikujiResults.length)])}
        ],
    });

    return completion.choices[0]?.message?.content
}

export {generateMikuzi}
